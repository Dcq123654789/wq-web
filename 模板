import {
  HomeOutlined,
  LogoutOutlined,
  SettingOutlined,
  UserOutlined,
} from '@ant-design/icons';
import { Breadcrumb, Button, Layout, Menu, theme } from 'antd';
import React, { useState } from 'react';
import ContentExample from '../Components/Content/example';
import ContentExample1 from '../Components/Content/example1';
import ContentExample2 from '../Components/Content/example2';
import ContentExample3 from '../Components/Content/example3';
import ContentExample4 from '../Components/Content/example4';
const { Header, Sider, Content } = Layout;

const MenuSystem = () => {
  const [activeMainMenu, setActiveMainMenu] = useState('1');
  const [activeSubMenu, setActiveSubMenu] = useState('1.1');

  // èœå•æ•°æ®
  const menuData = {
    1: [
      { key: '1.1', label: 'ç”¨æˆ·åˆ—è¡¨', content: ContentExample },
      { key: '1.2', label: 'å‘˜å·¥å·¥å•', content: ContentExample1 },
      { key: '1.3', label: 'å‘˜å·¥ç®¡ç†', content: ContentExample2 },
      { key: '1.4', label: 'è®¢å•åˆ—è¡¨', content: ContentExample3 },
      { key: '1.5', label: 'ææ–™è®°å½•', content: ContentExample4 },
    ],
    2: [
      { key: '2.1', label: 'å­èœå• 2.1', content: 'è¿™æ˜¯èœå• 2.1 çš„å†…å®¹' },
      { key: '2.2', label: 'å­èœå• 2.2', content: 'è¿™æ˜¯èœå• 2.2 çš„å†…å®¹' },
      { key: '2.3', label: 'å­èœå• 2.3', content: 'è¿™æ˜¯èœå• 2.3 çš„å†…å®¹' },
    ],
  };

  const subMenus = menuData[activeMainMenu] || [];
  const currentContent =
    subMenus.find((item) => item.key === activeSubMenu)?.content ||
    'è¯·é€‰æ‹©å­èœå•';

  // é¢åŒ…å±‘å¯¼èˆªæ•°æ®
  const mainMenuLabels = {
    1: 'ä¸»èœå• 1',
    2: 'ä¸»èœå• 2',
  };

  // è·å–å½“å‰é¢åŒ…å±‘è·¯å¾„
  const getBreadcrumbItems = () => {
    const mainLabel = mainMenuLabels[activeMainMenu];
    const subItem = subMenus.find((item) => item.key === activeSubMenu);
    const subLabel = subItem?.label || '';

    return [
      {
        title: (
          <span style={{ color: '#666', fontSize: '14px' }}>
            <HomeOutlined style={{ marginRight: '4px' }} />
            é¦–é¡µ
          </span>
        ),
        href: '#',
      },
      {
        title: (
          <span
            style={{ color: '#1890ff', fontSize: '14px', fontWeight: '500' }}
          >
            {mainLabel}
          </span>
        ),
        href: '#',
      },
      {
        title: (
          <span style={{ color: '#333', fontSize: '14px', fontWeight: '600' }}>
            {subLabel}
          </span>
        ),
      },
    ];
  };

  const {
    token: { colorBgContainer, borderRadiusLG },
  } = theme.useToken();

  // è‡ªå®šä¹‰æ ·å¼é…ç½®
  const customStyles = {
    // æ•´ä½“å¸ƒå±€æ ·å¼
    layout: {
      height: '100vh',
    },
    // é¡¶éƒ¨å¯¼èˆªæ æ ·å¼
    header: {
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'space-between', // å·¦å³åˆ†å¸ƒ
      background: 'linear-gradient(90deg,rgb(37, 247, 124),rgb(45, 234, 234))',
      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
      height: '80px',
      padding: '0 20px',
    },
    // LogoåŒºåŸŸæ ·å¼
    logoSection: {
      display: 'flex',
      alignItems: 'center',
      gap: '12px',
    },
    // èœå•åŒºåŸŸæ ·å¼
    menuSection: {
      flex: 1,
      display: 'flex',
      justifyContent: 'center',
    },
    // ç”¨æˆ·åŒºåŸŸæ ·å¼
    userSection: {
      display: 'flex',
      alignItems: 'center',
      gap: '28px',
    },
    // ä¾§è¾¹æ æ ·å¼
    sider: {
      width: 250, // è‡ªå®šä¹‰å®½åº¦
      background: 'rgba(255,255,255,0.95)', // åŠé€æ˜ç™½è‰²èƒŒæ™¯
      //   borderRadius: '0 20px 20px 0', // å³ä¾§åœ†è§’
      //   margin: '10px 0 10px 10px', // è¾¹è·
      boxShadow: '4px 0 12px rgba(0,0,0,0.1)', // é˜´å½±
      backdropFilter: 'blur(10px)', // æ¯›ç»ç’ƒæ•ˆæœ
    },
    // é¢åŒ…å±‘åŒºåŸŸæ ·å¼
    breadcrumbSection: {
      background: 'rgba(255,255,255,0.95)',
      padding: '12px 20px',
      margin: '0px 0px 0px 10px',
      borderRadius: '20px 0 0 0',
      boxShadow: '0 2px 8px rgba(0,0,0,0.06)',
      borderBottom: '1px solid rgba(0,0,0,0.06)',
    },
    // å†…å®¹åŒºåŸŸæ ·å¼
    content: {
      margin: '0px 0px 0px 10px',
      height: 'calc(100vh - 80px)', // å‡å»å¤´éƒ¨é«˜åº¦
      width: 'calc(100% - 10px)', // ç¡®ä¿å®½åº¦ä¸è¶…å‡ºçˆ¶å®¹å™¨
      maxWidth: 'calc(100% - 10px)', // æœ€å¤§å®½åº¦é™åˆ¶
      background: 'rgba(255,255,255,0.9)',
      borderRadius: '0 0 20px 0',
      boxShadow: '-4px 0 12px rgba(0,0,0,0.1)',
      backdropFilter: 'blur(10px)',
      border: '1px solid rgba(255,255,255,0.2)',
      overflow: 'hidden', // é˜²æ­¢å†…å®¹æº¢å‡º
    },
    // ä¸»èœå•æ ·å¼
    mainMenu: {
      background: 'transparent',
      border: 'none',
      marginLeft: '10%',
      flex: 1,
      fontSize: '16px',
      fontWeight: 'bold',
      color: '#ffffff',
    },
    // å­èœå•æ ·å¼
    subMenu: {
      background: 'transparent',
      border: 'none',
      fontSize: '14px',
    },
  };

  return (
    <Layout style={customStyles.layout}>
      {/* é¡¶éƒ¨å¯¼èˆªæ  */}
      <Header style={customStyles.header}>
        {/* LogoåŒºåŸŸ */}
        <div style={customStyles.logoSection}>
          <div
            style={{
              width: '40px',
              height: '40px',
              background: 'rgba(255,255,255,0.2)',
              borderRadius: '8px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              fontSize: '20px',
              fontWeight: 'bold',
              color: '#ffffff',
            }}
          >
            ğŸš€
          </div>
          <span
            style={{
              fontSize: '18px',
              fontWeight: 'bold',
              color: '#ffffff',
            }}
          >
            ç³»ç»Ÿåç§°
          </span>
        </div>

        {/* ä¸»èœå•åŒºåŸŸ */}
        <div style={customStyles.menuSection}>
          <Menu
            theme="light"
            mode="horizontal"
            selectedKeys={[activeMainMenu]}
            items={[
              { key: '1', label: 'ä¸»èœå• 1' },
              { key: '2', label: 'ä¸»èœå• 2' },
            ]}
            onClick={({ key }) => {
              setActiveMainMenu(key);
              setActiveSubMenu(menuData[key]?.[0]?.key || '');
            }}
            style={customStyles.mainMenu}
            triggerSubMenuAction="click"
          />
        </div>

        {/* ç”¨æˆ·åŒºåŸŸ */}
        <div style={customStyles.userSection}>
          <Button
            type="text"
            icon={<SettingOutlined />}
            style={{ color: '#ffffff', fontSize: '26px' }}
            title="è®¾ç½®"
          />
          <Button
            size="small"
            icon={<UserOutlined />}
            style={{
              backgroundColor: 'rgba(255,255,255,0.2)',
              fontSize: '26px',
            }}
          />
          <Button
            type="text"
            icon={<LogoutOutlined />}
            style={{ color: '#ffffff', fontSize: '26px' }}
            title="é€€å‡º"
          />
        </div>
      </Header>

      <Layout>
        {/* å·¦ä¾§å­èœå• */}
        <Sider width={customStyles.sider.width} style={customStyles.sider}>
          <Menu
            mode="inline"
            selectedKeys={[activeSubMenu]}
            items={subMenus}
            onClick={({ key }) => setActiveSubMenu(key)}
            style={{
              height: '100%',
              borderRight: 0,
              ...customStyles.subMenu,
            }}
          />
        </Sider>

        {/* å†…å®¹åŒºåŸŸ */}
        <Layout style={{ padding: '0' }}>
          {/* é¢åŒ…å±‘å¯¼èˆªæ  */}
          <div style={customStyles.breadcrumbSection}>
            <Breadcrumb
              items={getBreadcrumbItems()}
              separator=">"
              style={{
                fontSize: '14px',
                fontWeight: '500',
              }}
            />
          </div>

          <Content style={customStyles.content}>
            <div
              style={{
                height: '100%',
                width: '100%',
                display: 'flex',
                flexDirection: 'column',
                overflow: 'hidden',
                boxSizing: 'border-box',
              }}
            >
              {typeof currentContent === 'function'
                ? React.createElement(currentContent)
                : currentContent}
            </div>
          </Content>
        </Layout>
      </Layout>
    </Layout>
  );
};

export default MenuSystem;
